<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Messages</title>
        <link rel="icon" type="image/x-icon" href="images/favicon.ico">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/messages.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="js/jquery.minicolors.js"></script>
        <link rel="stylesheet" href="css/jquery.minicolors.css">
    </head>
    <body>
        <div class="mobile">
            <div class="text-section text-center">
                <img src="images/drift.png">
                <h3>We're pumped you want to add a Chat Button to your website!</h3>
                <p>It's the easiest way to start more conversations with your website visitors.<br>However the builder is only supported on Desktop at the moment. Sorry for any inconvenience!</p>
            </div>
            <div class="image-section">
                <img src="images/livechat.gif">
            </div>
        </div>
        <div class="left-panel">
            <div class="section">
                <h1>Add A Chat Button To Your Website</h1>
                <P>A simple, free, and easy way to chat with your website visitors from Drift.</p>
                <div class="select-section">
                    <div class="form-group">
                        <label>STYLE</label>
                        <select class="form-control style" id="style" name="style">
                            <option value="filled">Filled</option>
                            <option value="hollow">Hollow</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>SIZE</label>
                        <select class="form-control size" id="size" name="size">
                            <option value="40">Small - 40px high</option>
                            <option value="60">Medium - 60px high</option>
                            <option value="80">Large - 80px high</option>
                            <option value="110">X-Large - 110px high</option>
                        </select>
                    </div>
                </div>
                <div class="colorpicker-section">
                    <div class="form-group background">
                        <label>BACKGROUND COLOR</label>
                        <input class="form-control background-color" />
                    </div>
                    <div class="form-group foreground">
                        <label>FOREGROUND COLOR</label>
                        <input class="form-control foreground-color" />
                    </div>
                </div>
                <div class="icon-section margin-bottom">
                    <div class="icon selected">
                        <svg width="25" height="23" viewBox="0 0 25 23" xmlns="http://www.w3.org/2000/svg"><path d="M24.892 9.953c0-5.5-5.476-9.953-12.258-9.953C5.854 0 .376 4.452.376 9.953c0 3.318 1.987 6.24 5.05 8.053-.34 2.552-1.815 4.055-1.843 4.084-.142.14-.17.368-.114.567a.524.524 0 0 0 .482.312c2.95 0 5.334-1.93 6.61-3.206.654.086 1.363.142 2.072.142 6.782 0 12.258-4.452 12.258-9.953zm-5.128-.286H7.506a1.022 1.022 0 0 1 0-2.042h12.258a1.022 1.022 0 0 1 0 2.042zm-12.258 2.02h8.172a1.022 1.022 0 0 1 0 2.042H7.506a1.022 1.022 0 0 1 0-2.043z" fill="#CCC" fill-rule="evenodd"></path></svg>
                    </div>
                    <div class="icon">
                        <svg width="25" height="23" viewBox="0 0 25 23" xmlns="http://www.w3.org/2000/svg"><path d="M20.46 17.73H5.596L1.82 22.545a1.014 1.014 0 0 1-1.136.334A1.04 1.04 0 0 1 0 21.893V4.142C0 1.87 1.812.02 4.04.02h16.42c2.228 0 4.04 1.85 4.04 4.122v9.465c0 2.273-1.812 4.122-4.04 4.122zm-2.085-9.376H6.125c-.564 0-1.02-.467-1.02-1.042S5.56 6.27 6.125 6.27h12.25c.563 0 1.02.467 1.02 1.042s-.457 1.042-1.02 1.042zm-12.25 2.062h8.167c.563 0 1.02.466 1.02 1.04 0 .576-.457 1.043-1.02 1.043H6.125c-.564 0-1.02-.47-1.02-1.044s.456-1.04 1.02-1.04z" fill="#CCC" fill-rule="evenodd"></path></svg>
                    </div>
                    <div class="icon">
                        <svg width="26" height="23" viewBox="0 0 26 23" xmlns="http://www.w3.org/2000/svg"><path d="M23.348 17.854H10.56l-3.78 4.72a1.02 1.02 0 0 1-1.136.327 1.02 1.02 0 0 1-.683-.962v-4.084H2.92a2.044 2.044 0 0 1-2.043-2.04V2.54C.875 1.416 1.79.5 2.918.5h20.43c1.127 0 2.043.916 2.043 2.042v13.27a2.044 2.044 0 0 1-2.042 2.042zm0-15.312H2.918v13.27h3.064c.564 0 1.022.458 1.022 1.02v2.196l2.267-2.832c.013-.015.03-.02.043-.035.048-.053.105-.093.163-.136.05-.037.098-.077.154-.103.055-.026.114-.038.175-.054.07-.02.138-.038.21-.042.02 0 .034-.01.053-.01h13.28V2.54zM5.982 10.708c0-.563.458-1.02 1.022-1.02h8.172a1.022 1.022 0 0 1 0 2.04H7.004a1.022 1.022 0 0 1-1.022-1.02zm0-3.062c0-.564.458-1.02 1.022-1.02h12.258a1.022 1.022 0 0 1 0 2.04H7.004a1.022 1.022 0 0 1-1.022-1.02z" fill="#CCC" fill-rule="evenodd"></path></svg>
                    </div>
                    <div class="icon no-icon">
                        <b>No Icon</b>
                    </div>
                </div>
                <div class="title-section margin-bottom">
                    <div class="text-left">
                        <label>CHAT BUTTON TEXT</label>
                        <input class="form-control title" value="Contact Us" />
                        <span>Other Suggestions: Report an Issue, Speak to a Sales Person Now, Leave Feedback, Contact Support...</span>
                    </div>
                </div>
                <div class="code-section margin-bottom">
                    <div class="text-left">
                        <label>YOUR <a href="https://app.drift.com/customize" target="_blank">DRIFT CODE SNIPPET</a></label>
                        <textarea class="form-control codepanel" rows="8"></textarea>
                        <div class="hidden script-error">There seems to be an error with your code, please try again!</div>
                        <div class="account">Need a Drift Account? <a href="https://app.drift.com/getstarted" target="_blank">Create an Account</a></div>
                    </div>
                </div>
                <div class="button-section">
                    <button class="btn" disabled="disabled" onclick="generate()">GENERATE MY BUTTON!</button>
                    <div class="success-message hidden">
                        <img src="images/star.png" width="35" height="35">
                        <div class="text-left">All Set! Your shiny new button code above is ready to place on your website so you can get chatting!</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right-panel">
            <div class="section">
                <h5><b>WHY A CHAT BUTTON?</b></h5>
                <p>Here's the truth about most websites: 98% of people will leave without doing anything. But there's a secret to getting people to stick around: talking to them. Adding a chat button to your website is the easiest way to start more conversations with your website visitors.</p>
            </div>
            <div class="section">
                <h5><b>HERE'S HOW:</b></h5>
                <p>
                    1. Customize the chat button to match your brand's look and feel.<br>
                    2. Place your Drift Code Snippet in the box on this page.<br>
                    3. Click "Generate My Button!"<br>
                    4. Copy and paste the embed code on the site where you'd like the chat button to display.
                </p>
            </div>
            <div class="section">
                <span><b>Need a Drift Account?</b></span>
                <a href="https://app.drift.com/getstarted" target="_blank">Create an Account</a>
            </div>

            <h6>YOUR BEAUTIFUL BUTTON - PREVIEW</h6>
            <div class="button">
                <button class="btn drift-chat-button"><span class="icon"></span><b></b></button>
            </div>
            <div class="test"></div>
            <div class="copyright">Made with <img src="images/heart.png" width="20" height="20"> by <a href="https://www.drift.com" target="_blank">Drift</a></div>
        </div>
    </body>
</html>
<script type="text/javascript">
    $(document).ready(function() {
        var placeholder = "Grab your Drift Code Snippet and paste it here (you'll find it under Settings -> Customize Drift). \n\nDon't have a Drift account? Well go and get one! Head over to Drift.com and you can signup for free.";
        $('TEXTAREA.codepanel').attr('placeholder', placeholder);
        $('INPUT.background-color').minicolors({
            theme: 'bootstrap',
            defaultValue: '13CB6E',
            letterCase: 'uppercase',
            opacity: true,
        });
        $('INPUT.foreground-color').minicolors({
            theme: 'bootstrap',
            defaultValue: 'FFFFFF',
            letterCase: 'uppercase',
            opacity: true,
        });
        $('.minicolors-panel').append('<div class="color-value"></div>');
        var size = $('.left-panel SELECT.size').val();
        var background = $('.left-panel INPUT.background-color').minicolors('rgbaString', $('.left-panel INPUT.background-color').val());
        var foreground = $('.left-panel INPUT.foreground-color').minicolors('rgbaString', $('.left-panel INPUT.foreground-color').val());
        $('.background .minicolors-panel .color-value').html(background);
        $('.foreground .minicolors-panel .color-value').html(foreground);
        var title = $('.left-panel INPUT.title').val();
        var icon = $('.left-panel .icon.selected').html();
        $('.right-panel .drift-chat-button').css({'background':background, 'color':foreground, 'height':size, 'fill':foreground});
        $('.right-panel .drift-chat-button b').html(title);
        $('.right-panel .drift-chat-button .icon').html(icon);
        $('.left-panel SELECT.style').change(function() {
            var background_color = $('.left-panel INPUT.background-color').minicolors('rgbaString', $('.left-panel INPUT.background-color').val());
            var foreground_color = $('.left-panel INPUT.foreground-color').minicolors('rgbaString', $('.left-panel INPUT.foreground-color').val());
            if ($(this).val() == 'hollow') {
                $('.right-panel .drift-chat-button').css({'background':'none', 'border-color':background_color, 'color':background_color, 'fill':background_color});
                $('.left-panel INPUT.foreground-color').minicolors('value', $('.left-panel INPUT.background-color').val());
            } else {
                $('.right-panel .drift-chat-button').css({'background':background_color, 'border-color':'transparent', 'color':foreground_color, 'fill':foreground_color});
            }
        });
        $('.left-panel SELECT.size').change(function() {
            $('.right-panel .drift-chat-button').css('height', $(this).val());
        });
        $('.left-panel INPUT.background-color').change(function() {
            var background_color = $('.left-panel INPUT.background-color').minicolors('rgbaString', $(this).val());
            $('.background .minicolors-panel .color-value').html(background_color);
            if ($('.left-panel SELECT.style').val() == 'hollow') {
                $('.right-panel .drift-chat-button').css({'background':'none', 'border-color':background_color, 'color':background_color, 'fill':background_color});
                $('.left-panel INPUT.foreground-color').minicolors('value', $(this).val());
            } else {
                $('.right-panel .drift-chat-button').css({'background':background_color, 'border-color':'transparent'});
            }
        });
        $('.left-panel INPUT.foreground-color').change(function() {
            var foreground_color = $('.left-panel INPUT.foreground-color').minicolors('rgbaString', $(this).val());
            $('.foreground .minicolors-panel .color-value').html(foreground_color);
            $('.right-panel .drift-chat-button').css({'color':foreground_color, 'fill':foreground_color});
        });
        $('.left-panel .icon-section .icon').click(function() {
            $('.left-panel .icon-section .icon').removeClass('selected');
            if ($(this).hasClass('no-icon')) {
                $('.right-panel .drift-chat-button .icon').html('');

            } else {
                var foreground_color = $('.left-panel INPUT.foreground-color').minicolors('rgbaString', $('.left-panel INPUT.foreground-color').val());
                $('.right-panel .drift-chat-button .icon').html($(this).html());
                $('.right-panel .drift-chat-button').css('fill', foreground_color);
            }
            $(this).addClass('selected');
        });
        $('.left-panel INPUT.title').on('input', function() {
            $('.right-panel .drift-chat-button b').html($(this).val());
        });
        $('.left-panel TEXTAREA.codepanel').on('input', function() {
            if ($(this).val().indexOf('<!-- Start of Async Drift Code -->') !== -1 && $(this).val().indexOf('drift.load') !== -1) {
                $('.left-panel .script-error').addClass('hidden');
            } else {
                $('.left-panel .script-error').removeClass('hidden');
            }
            if ($(this).val() != '') {
                $('.left-panel .button-section button').removeAttr('disabled');
                $('.left-panel .button-section button').css('background', '#157AFB');
            } else {
                $('.left-panel .script-error').addClass('hidden');
                $('.left-panel .button-section button').attr('disabled', 'disabled');
                $('.left-panel .button-section button').css('background', '');
            }
        });
    });

    function generate() {
        var animation = '<div id="circleG"><div id="circleG_1" class="circleG"></div><div id="circleG_2" class="circleG"></div><div id="circleG_3"class="circleG"></div></div>'
        var drift_snippet_code = $('.left-panel .codepanel').val();
        var script = '<scr' + 'ipt>!function(){function b(a){"loading"!=document.readyState?a():document.addEventListener?document.addEventListener("DOMContentLoaded",a):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&a()})}function c(a,b){for(var c=document.querySelectorAll(a),d=0;d<c.length;d++)b(c[d],d)}function d(a,b){return b.preventDefault(),a.sidebar.open(),!1}var a=".drift-chat-button";b(function(){drift.on("ready",function(b){b.widget.hide();var e=d.bind(this,b);c(a,function(a){a.addEventListener("click",e)}),drift.on("message",function(a){a.data.sidebarOpen||b.sidebar.open()}),drift.on("sidebarClose",function(a){a.data.widgetVisible&&b.widget.hide()})})})}();</scr' + 'ipt>\n';
        var style = '<style>.drift-chat-button svg path {fill: inherit;}.drift-chat-button svg {vertical-align: middle;margin-right: 15px;}.drift-chat-button{position: fixed;right: 24px;bottom: 24px;z-index: 99999;padding: 6px 25px;border: 1px solid transparent;font-size: 16px;cursor: pointer;border-radius: 4px;}</style>';
        var html = $(".right-panel .button").html().replace(/  /g, '');
        $('.left-panel .button-section button').html(animation);
        setTimeout(script_generate, 3000);
        function script_generate() {
            var final_script = drift_snippet_code + '\n<!-- Start of Customized Drift Code -->\n' + script + style + html + '<!-- End of Customized Drift Code -->';
            $('.left-panel .codepanel').val(final_script);
            $('.left-panel .button-section button').addClass('hidden');
            $('.left-panel .button-section .success-message').removeClass('hidden');
            $('.left-panel .code-section .account').addClass('hidden');
            $('.left-panel .code-section').addClass('underline');
            $('.left-panel .code-section label').html('YOUR DRIFT CHAT BUTTON EMBED CODE');
        }
    }
</script>
